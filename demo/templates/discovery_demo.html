<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NSM Prime Discovery Research Platform</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
        h1 {
            color: #1e3c72;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.2em;
        }
        .research-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid #1e3c72;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #1e3c72;
            font-size: 1.1em;
        }
        textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
            resize: vertical;
            min-height: 200px;
        }
        .corpus-presets {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .preset-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        .preset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .preset-btn.active {
            background: linear-gradient(45deg, #1e3c72, #2a5298);
        }
        button {
            background: linear-gradient(45deg, #1e3c72, #2a5298);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            width: 100%;
            margin-top: 10px;
            transition: all 0.3s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        .result {
            margin-top: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #28a745;
        }
        .error {
            background: #ffe6e6;
            border-left-color: #dc3545;
            color: #721c24;
        }
        .loading {
            text-align: center;
            color: #666;
            padding: 40px;
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #1e3c72;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .nav-links {
            text-align: center;
            margin-bottom: 30px;
        }
        .nav-links a {
            color: #1e3c72;
            text-decoration: none;
            margin: 0 10px;
            padding: 8px 15px;
            border-radius: 5px;
            transition: background-color 0.3s;
            font-weight: 500;
        }
        .nav-links a:hover {
            background-color: #f0f0f0;
        }
        .discovery-process {
            background: #e8f4fd;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .process-step {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border-left: 3px solid #1e3c72;
        }
        .step-number {
            background: #1e3c72;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }
        .candidate-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            transition: all 0.3s;
        }
        .candidate-item:hover {
            border-color: #1e3c72;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .candidate-item.accepted {
            border-color: #28a745;
            background: #f8fff9;
        }
        .candidate-item.rejected {
            border-color: #dc3545;
            background: #fff8f8;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .metric-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #e9ecef;
        }
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #1e3c72;
        }
        .metric-label {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }
        .prime-tag {
            display: inline-block;
            background: #1e3c72;
            color: white;
            padding: 4px 8px;
            border-radius: 15px;
            margin: 2px;
            font-size: 0.9em;
        }
        .confidence-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 20px;
            margin: 10px 0;
            overflow: hidden;
        }
        .confidence-fill {
            height: 100%;
            background: linear-gradient(45deg, #28a745, #20c997);
            transition: width 0.5s;
        }
        .corpus-stats {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        .progress-container {
            background: #e9ecef;
            border-radius: 10px;
            height: 25px;
            margin: 15px 0;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(45deg, #1e3c72, #2a5298);
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav-links">
            <a href="/">Home</a>
            <a href="/detection">Detection</a>
            <a href="/roundtrip">Round-trip</a>
            <a href="/deepnsm">DeepNSM</a>
            <a href="/mdl">MDL</a>
            <a href="/temporal">Temporal</a>
            <a href="/mwe">MWE</a>
            <a href="/router">Router</a>
        </div>
        
        <h1>üî¨ NSM Prime Discovery Research Platform</h1>
        <p class="subtitle">Advanced Natural Semantic Metalanguage Research & Prime Discovery</p>

        <div class="research-section">
            <h3>üß¨ Research Overview</h3>
            <p>This platform uses sophisticated <strong>Minimum Description Length (MDL)</strong> analysis to discover new semantic primitives from large corpora. The system analyzes linguistic patterns, semantic clusters, and cross-lingual universality to identify potential new NSM primes.</p>
            
            <div class="discovery-process">
                <h4>üîç Discovery Process:</h4>
                <div class="process-step">
                    <div class="step-number">1</div>
                    <div><strong>Corpus Analysis:</strong> Parse and analyze large text corpora for linguistic patterns</div>
                </div>
                <div class="process-step">
                    <div class="step-number">2</div>
                    <div><strong>Semantic Clustering:</strong> Group similar expressions using SBERT embeddings</div>
                </div>
                <div class="process-step">
                    <div class="step-number">3</div>
                    <div><strong>MDL Compression:</strong> Calculate compression ratios vs. existing NSM primes</div>
                </div>
                <div class="process-step">
                    <div class="step-number">4</div>
                    <div><strong>Universality Testing:</strong> Cross-lingual validation and consistency checks</div>
                </div>
                <div class="process-step">
                    <div class="step-number">5</div>
                    <div><strong>Prime Evaluation:</strong> Score candidates based on linguistic criteria</div>
                </div>
            </div>
        </div>

        <div class="research-section">
            <h3>üìö Corpus Selection</h3>
            <p>Choose from pre-built research corpora or input your own text for analysis:</p>
            
            <div class="corpus-presets">
                <button class="preset-btn" onclick="loadPreset('philosophy')">üìñ Philosophy Corpus</button>
                <button class="preset-btn" onclick="loadPreset('scientific')">üî¨ Scientific Abstracts</button>
                <button class="preset-btn" onclick="loadPreset('literary')">üìö Literary Works</button>
                <button class="preset-btn" onclick="loadPreset('news')">üì∞ News Articles</button>
                <button class="preset-btn" onclick="loadPreset('technical')">‚öôÔ∏è Technical Documentation</button>
                <button class="preset-btn" onclick="loadPreset('conversational')">üí¨ Conversational Data</button>
            </div>

            <form id="discoveryForm">
                <div class="form-group">
                    <label for="corpusText">Research Corpus (Large text recommended for meaningful discovery):</label>
                    <textarea id="corpusText" rows="12" placeholder="Paste your research corpus here... Large, diverse text works best for prime discovery. The system will analyze linguistic patterns, semantic clusters, and cross-lingual universality to identify potential new NSM primes."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="discoveryParams">Discovery Parameters:</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div>
                            <label for="maxCandidates">Max Candidates:</label>
                            <input type="number" id="maxCandidates" value="20" min="5" max="100" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 5px;">
                        </div>
                        <div>
                            <label for="acceptanceThreshold">Acceptance Threshold:</label>
                            <input type="number" id="acceptanceThreshold" value="0.6" min="0.1" max="1.0" step="0.1" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 5px;">
                        </div>
                    </div>
                </div>
                
                <button type="submit">üî¨ Launch Prime Discovery Research</button>
            </form>
        </div>

        <div id="result" class="result" style="display: none;">
            <h3>üî¨ Research Results</h3>
            <div id="resultContent"></div>
        </div>
    </div>

    <script>
        // Pre-built research corpora
        const corpora = {
            philosophy: `The nature of consciousness remains one of the most profound mysteries in philosophy and cognitive science. What does it mean to be aware, to experience, to have subjective feelings? These questions touch upon the fundamental aspects of existence and perception. Philosophers have debated whether consciousness is an emergent property of complex systems, a fundamental aspect of reality, or something entirely different. The hard problem of consciousness, as formulated by David Chalmers, asks why and how physical processes in the brain give rise to subjective experience. This question has implications for our understanding of mind, matter, and the relationship between them. Some argue that consciousness is irreducible and cannot be explained in purely physical terms, while others maintain that it will eventually be understood through advances in neuroscience and cognitive science. The debate continues to inspire research across multiple disciplines, from philosophy and psychology to artificial intelligence and quantum physics.`,
            
            scientific: `Recent advances in machine learning have demonstrated remarkable capabilities in pattern recognition and decision-making tasks. Deep neural networks, particularly transformer architectures, have achieved unprecedented performance in natural language processing, computer vision, and other domains. These systems can process vast amounts of data, identify complex patterns, and generate human-like text and images. However, questions remain about their interpretability, robustness, and generalization capabilities. Researchers are actively investigating methods to make these systems more transparent, reliable, and aligned with human values. The field continues to evolve rapidly, with new architectures and training methods being developed regularly.`,
            
            literary: `The human condition encompasses the fundamental experiences and challenges that define our existence. Love and loss, joy and sorrow, hope and despair - these universal emotions connect us across cultures and time periods. Literature has long served as a mirror reflecting these shared experiences, allowing us to explore the depths of human nature through stories and poetry. Writers throughout history have grappled with questions of meaning, purpose, and the search for truth. Their works continue to resonate with readers, offering insights into the complexities of human relationships, the struggle for identity, and the quest for understanding in an often mysterious world.`,
            
            news: `Global climate change represents one of the most pressing challenges facing humanity in the 21st century. Rising temperatures, extreme weather events, and shifting precipitation patterns are affecting ecosystems and human societies worldwide. Scientists have documented significant changes in global temperature, sea level, and atmospheric composition over the past century. These changes are primarily attributed to human activities, particularly the burning of fossil fuels and deforestation. The consequences of climate change include more frequent and severe heatwaves, droughts, floods, and storms. Coastal communities face increasing risks from sea level rise, while agricultural regions must adapt to changing growing conditions. International efforts to address climate change include the Paris Agreement, which aims to limit global warming to well below 2 degrees Celsius above pre-industrial levels.`,
            
            technical: `Software engineering principles emphasize the importance of modular design, code reusability, and maintainability. Object-oriented programming provides a framework for organizing code into classes and objects that encapsulate data and behavior. Design patterns offer proven solutions to common software design problems, promoting code that is flexible, extensible, and easy to understand. Version control systems enable collaborative development by tracking changes and managing different versions of code. Testing methodologies ensure software quality through unit tests, integration tests, and system tests. Continuous integration and deployment pipelines automate the process of building, testing, and deploying software. Documentation standards help developers understand and maintain code effectively.`,
            
            conversational: `Everyday conversations reveal the complexity of human communication and social interaction. People use various linguistic strategies to convey meaning, express emotions, and build relationships. Conversation analysis examines the structure and patterns of natural speech, including turn-taking, topic management, and repair mechanisms. Speakers employ different registers and styles depending on context, audience, and purpose. Nonverbal cues such as facial expressions, gestures, and tone of voice complement verbal communication. Cultural differences influence communication styles and expectations. Technology has introduced new forms of conversation through text messaging, social media, and video calls. These platforms create both opportunities and challenges for human connection and understanding.`
        };

        function loadPreset(presetName) {
            // Remove active class from all buttons
            document.querySelectorAll('.preset-btn').forEach(btn => btn.classList.remove('active'));
            // Add active class to clicked button
            event.target.classList.add('active');
            
            const corpusText = document.getElementById('corpusText');
            corpusText.value = corpora[presetName];
        }

        document.getElementById('discoveryForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const corpusText = document.getElementById('corpusText').value;
            const maxCandidates = parseInt(document.getElementById('maxCandidates').value);
            const acceptanceThreshold = parseFloat(document.getElementById('acceptanceThreshold').value);
            
            if (!corpusText.trim()) {
                alert('Please enter a research corpus for analysis.');
                return;
            }
            
            const resultDiv = document.getElementById('result');
            const resultContent = document.getElementById('resultContent');
            
            resultDiv.style.display = 'block';
            resultContent.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <h4>üî¨ Conducting Prime Discovery Research...</h4>
                    <p>Analyzing corpus patterns, calculating MDL compression ratios, and evaluating semantic universality...</p>
                    <div class="progress-container">
                        <div class="progress-bar" style="width: 0%">0%</div>
                    </div>
                </div>
            `;
            
            // Simulate progress
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 90) progress = 90;
                const progressBar = document.querySelector('.progress-bar');
                progressBar.style.width = progress + '%';
                progressBar.textContent = Math.round(progress) + '%';
            }, 500);
            
            try {
                const response = await fetch('/api/discovery', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        corpus: [corpusText],
                        max_candidates: maxCandidates,
                        acceptance_threshold: acceptanceThreshold
                    })
                });
                
                clearInterval(progressInterval);
                
                if (!response.ok) {
                    throw new Error(`Discovery failed: ${response.status}`);
                }
                
                const result = await response.json();
                
                // Complete progress bar
                document.querySelector('.progress-bar').style.width = '100%';
                document.querySelector('.progress-bar').textContent = '100%';
                
                // Display results
                displayDiscoveryResults(result, corpusText, maxCandidates, acceptanceThreshold);
                
            } catch (error) {
                clearInterval(progressInterval);
                resultContent.innerHTML = `
                    <div class="error">
                        <h4>‚ùå Research Error</h4>
                        <p>${error.message}</p>
                        <p>Please check that the API server is running and try again.</p>
                    </div>
                `;
            }
        });

        function displayDiscoveryResults(result, corpusText, maxCandidates, acceptanceThreshold) {
            const wordCount = corpusText.split(/\s+/).length;
            const charCount = corpusText.length;
            
            const resultContent = document.getElementById('resultContent');
            
            resultContent.innerHTML = `
                <div class="corpus-stats">
                    <h4>üìä Corpus Statistics</h4>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-value">${wordCount.toLocaleString()}</div>
                            <div class="metric-label">Words</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${charCount.toLocaleString()}</div>
                            <div class="metric-label">Characters</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${result.candidates ? result.candidates.length : 0}</div>
                            <div class="metric-label">Candidates Found</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${result.accepted ? result.accepted.length : 0}</div>
                            <div class="metric-label">Accepted Primes</div>
                        </div>
                    </div>
                </div>

                <div class="research-section">
                    <h4>üîç Discovery Analysis</h4>
                    <p><strong>Research Parameters:</strong> Max Candidates: ${maxCandidates}, Acceptance Threshold: ${acceptanceThreshold}</p>
                    <p><strong>Processing Time:</strong> ${result.processing_time ? result.processing_time.toFixed(3) : 'N/A'} seconds</p>
                    
                    ${result.candidates && result.candidates.length > 0 ? `
                        <h5>üéØ Prime Candidates (${result.candidates.length} found):</h5>
                        ${result.candidates.map((candidate, index) => {
                            const isAccepted = candidate.mdl_delta > acceptanceThreshold;
                            const confidence = candidate.confidence || 0.5;
                            return `
                                <div class="candidate-item ${isAccepted ? 'accepted' : 'rejected'}">
                                    <h6>${index + 1}. ${candidate.text || 'Unknown'} ${isAccepted ? '‚úÖ ACCEPTED' : '‚ùå REJECTED'}</h6>
                                    <p><strong>MDL Delta:</strong> ${candidate.mdl_delta ? candidate.mdl_delta.toFixed(3) : 'N/A'} (Threshold: ${acceptanceThreshold})</p>
                                    <p><strong>Confidence:</strong> ${(confidence * 100).toFixed(1)}%</p>
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" style="width: ${confidence * 100}%"></div>
                                    </div>
                                    <p><strong>Semantic Cluster:</strong> ${candidate.semantic_cluster || 'N/A'}</p>
                                    <p><strong>Universality Score:</strong> ${candidate.universality_score ? candidate.universality_score.toFixed(3) : 'N/A'}</p>
                                    ${candidate.related_primes ? `<p><strong>Related Primes:</strong> ${candidate.related_primes.map(p => `<span class="prime-tag">${p}</span>`).join(' ')}</p>` : ''}
                                </div>
                            `;
                        }).join('')}
                    ` : `
                        <div class="candidate-item">
                            <h6>No prime candidates found</h6>
                            <p>Try using a larger, more diverse corpus for better discovery results.</p>
                        </div>
                    `}
                </div>

                <div class="research-section">
                    <h4>üß¨ Research Insights</h4>
                    <p>This analysis demonstrates the sophisticated NSM prime discovery process:</p>
                    <ul>
                        <li><strong>MDL Compression Analysis:</strong> Evaluates how well candidate expressions compress semantic information compared to existing NSM primes</li>
                        <li><strong>Semantic Clustering:</strong> Groups similar expressions using advanced embedding techniques</li>
                        <li><strong>Universality Testing:</strong> Assesses cross-lingual consistency and semantic stability</li>
                        <li><strong>Confidence Scoring:</strong> Calculates reliability based on multiple linguistic criteria</li>
                    </ul>
                    
                    <p><strong>Research Applications:</strong></p>
                    <ul>
                        <li>Expanding the NSM prime inventory for better semantic coverage</li>
                        <li>Identifying domain-specific semantic primitives</li>
                        <li>Cross-lingual semantic analysis and comparison</li>
                        <li>Improving machine translation and natural language understanding</li>
                    </ul>
                </div>
            `;
        }
    </script>
</body>
</html>
